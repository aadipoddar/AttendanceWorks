<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AttendanceWorksMaui.MainPage"
             BackgroundColor="{AppThemeBinding Light=White, Dark=#1A1A1A}"
             NavigationPage.HasNavigationBar="False"
             Title="Attendance Works">

	<ContentPage.Resources>
		<Style x:Key="CardBorderStyle" TargetType="Border">
			<Setter Property="Stroke" Value="{AppThemeBinding Light=#EEEEEE, Dark=#404040}"/>
			<Setter Property="StrokeThickness" Value="1"/>
			<Setter Property="StrokeShape" Value="RoundRectangle 15"/>
			<Setter Property="BackgroundColor" Value="{AppThemeBinding Light=White, Dark=#252525}"/>
			<Setter Property="Padding" Value="20"/>
			<Setter Property="Shadow">
				<Setter.Value>
					<Shadow Brush="Black" Offset="0,5" Radius="10" Opacity="0.1"/>
				</Setter.Value>
			</Setter>
		</Style>

		<Style x:Key="CardHeaderStyle" TargetType="Label">
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="TextColor" Value="{AppThemeBinding Light=#444444, Dark=#BBBBBB}"/>
			<Setter Property="FontAttributes" Value="Bold"/>
			<Setter Property="Margin" Value="0,0,0,5"/>
		</Style>

		<Style x:Key="PrimaryButtonStyle" TargetType="Button">
			<Setter Property="TextColor" Value="White"/>
			<Setter Property="FontAttributes" Value="Bold"/>
			<Setter Property="FontSize" Value="16"/>
			<Setter Property="HeightRequest" Value="50"/>
			<Setter Property="CornerRadius" Value="25"/>
			<Setter Property="Margin" Value="0,5,0,5"/>
			<Setter Property="Shadow">
				<Setter.Value>
					<Shadow Brush="#40000000" Offset="0,5" Radius="10"/>
				</Setter.Value>
			</Setter>
		</Style>

		<Style x:Key="SecondaryButtonStyle" TargetType="Button">
			<Setter Property="BackgroundColor" Value="Transparent"/>
			<Setter Property="FontAttributes" Value="Bold"/>
			<Setter Property="BorderWidth" Value="1"/>
			<Setter Property="HeightRequest" Value="45"/>
			<Setter Property="CornerRadius" Value="22"/>
			<Setter Property="Margin" Value="0,5,0,5"/>
		</Style>
	</ContentPage.Resources>

	<Grid RowDefinitions="Auto, *, Auto">
		<!-- Header Section with Gradient Background -->
		<BoxView Grid.Row="0"
                 HeightRequest="150"
                 VerticalOptions="Start">
			<BoxView.Background>
				<LinearGradientBrush StartPoint="0,0"
                                      EndPoint="1,1">
					<GradientStop Color="#4CAF50"
                                  Offset="0.1"/>
					<GradientStop Color="#2196F3"
                                  Offset="0.9"/>
				</LinearGradientBrush>
			</BoxView.Background>
		</BoxView>

		<!-- Header Content -->
		<Grid Grid.Row="0" ColumnDefinitions="*, Auto" Padding="25,30,25,20">
			<VerticalStackLayout Grid.Column="0">
				<Label x:Name="WelcomeLabel" 
                       Text="Hello, Student" 
                       FontSize="26" 
                       FontAttributes="Bold"
                       TextColor="White"/>
				<Label x:Name="DateLabel" 
                       Text="May 6, 2025" 
                       FontSize="16" 
                       TextColor="#E0E0E0"
                       Margin="0,2,0,0"/>
			</VerticalStackLayout>

			<Button Grid.Column="1"
                    x:Name="LogoutButton"
                    Text="Log Out"
                    HeightRequest="40"
                    BackgroundColor="White"
                    TextColor="#e74c3c"
                    FontAttributes="Bold"
                    CornerRadius="20"
                    Padding="15,0"
                    HorizontalOptions="End"
                    VerticalOptions="Center"
                    Clicked="LogoutButton_Clicked"/>
		</Grid>

		<!-- Main Content -->
		<ScrollView Grid.Row="1" Padding="20,0,20,0" Margin="0,-30,0,0">
			<VerticalStackLayout Spacing="20">
				<!-- Current Class Card -->
				<Border Style="{StaticResource CardBorderStyle}">
					<VerticalStackLayout>
						<Label Text="CURRENT CLASS" 
                               Style="{StaticResource CardHeaderStyle}"/>
						<Label x:Name="CurrentClassLabel" 
                               Text="No active class" 
                               FontSize="22" 
                               FontAttributes="Bold" 
                               Margin="0,5,0,10" 
                               TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
						<Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
							<Label Grid.Column="0" Grid.Row="0" 
                                   Text="Time:" 
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#555555, Dark=#BBBBBB}"/>
							<Label Grid.Column="1" Grid.Row="0" 
                                   x:Name="ClassTimeLabel" 
                                   Text="N/A" 
                                   Margin="10,0,0,0"
                                   TextColor="{AppThemeBinding Light=#555555, Dark=#BBBBBB}"/>

							<Label Grid.Column="0" Grid.Row="1" 
                                   Text="Room:" 
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#555555, Dark=#BBBBBB}"/>
							<Label Grid.Column="1" Grid.Row="1" 
                                   x:Name="ClassRoomLabel" 
                                   Margin="10,0,0,0"
                                   Text="N/A" 
                                   TextColor="{AppThemeBinding Light=#555555, Dark=#BBBBBB}"/>

							<Label Grid.Column="2" Grid.RowSpan="2" 
                                   x:Name="StatusLabel" 
                                   Text="INACTIVE" 
                                   TextColor="#ff6b6b"
                                   FontSize="14"
                                   FontAttributes="Bold"
                                   VerticalOptions="Center"
                                   HorizontalOptions="End"/>
						</Grid>

						<!-- Navigate to Class Button (visible when student is away) -->
						<Button x:Name="NavigateToClassButton"
                                Text="Navigate to Class"
                                FontAttributes="Bold"
                                HeightRequest="40"
                                CornerRadius="20"
                                Margin="0,15,0,0"
								IsVisible="False"
                                Clicked="NavigateToClassButton_Clicked"
                                TextColor="White">
							<Button.Background>
								<LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
									<GradientStop Color="#5c6bc0" Offset="0.1"/>
									<GradientStop Color="#3949ab" Offset="0.9"/>
								</LinearGradientBrush>
							</Button.Background>
						</Button>
					</VerticalStackLayout>
				</Border>

				<!-- Location Info Card -->
				<Border Style="{StaticResource CardBorderStyle}">
					<VerticalStackLayout>
						<Label Text="YOUR LOCATION" 
                               Style="{StaticResource CardHeaderStyle}"/>
						<Grid ColumnDefinitions="*,*" Margin="0,10,0,0">
							<Label Grid.Column="0" 
                                   Text="Current:" 
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#555555, Dark=#BBBBBB}"/>
							<Label Grid.Column="1" 
                                   x:Name="LocationStatusLabel" 
                                   Text="Checking..." 
                                   TextColor="{AppThemeBinding Light=#555555, Dark=#BBBBBB}"/>
						</Grid>
						<Label x:Name="LocationInfoLabel" 
                               Text="Location services must be enabled to mark attendance" 
                               TextColor="{AppThemeBinding Light=#555555, Dark=#BBBBBB}"
                               Margin="0,10,0,0"/>
					</VerticalStackLayout>
				</Border>

				<!-- Attendance Status Card -->
				<Border Style="{StaticResource CardBorderStyle}">
					<VerticalStackLayout>
						<Label Text="ATTENDANCE STATUS" 
                               Style="{StaticResource CardHeaderStyle}"/>
						<Label x:Name="AttendanceStatusLabel" 
                               Text="Not marked" 
                               FontSize="22" 
                               FontAttributes="Bold" 
                               TextColor="#ff9900"
                               Margin="0,5,0,5"/>

						<!-- Attendance History or Stats Summary -->
						<Grid ColumnDefinitions="*,*,*" Margin="0,15,0,0">
							<VerticalStackLayout Grid.Column="0" HorizontalOptions="Center">
								<Label Text="Present" 
                                       FontSize="12" 
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" 
                                       HorizontalOptions="Center"/>
								<Label x:Name="presentPercentLabel"
									   Text="00%" 
                                       FontSize="16" 
                                       TextColor="#4CAF50" 
                                       FontAttributes="Bold" 
                                       HorizontalOptions="Center"/>
							</VerticalStackLayout>

							<VerticalStackLayout Grid.Column="1" HorizontalOptions="Center">
								<Label Text="Late" 
                                       FontSize="12" 
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" 
                                       HorizontalOptions="Center"/>
								<Label x:Name="latePercentLabel" 
									   Text="00%" 
                                       FontSize="16" 
                                       TextColor="#FF9800" 
                                       FontAttributes="Bold" 
                                       HorizontalOptions="Center"/>
							</VerticalStackLayout>

							<VerticalStackLayout Grid.Column="2" HorizontalOptions="Center">
								<Label Text="Absent" 
                                       FontSize="12" 
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" 
                                       HorizontalOptions="Center"/>
								<Label x:Name="absentPercentLabel" 
									   Text="00%" 
                                       FontSize="16" 
                                       TextColor="#F44336" 
                                       FontAttributes="Bold" 
                                       HorizontalOptions="Center"/>
							</VerticalStackLayout>
						</Grid>
					</VerticalStackLayout>
				</Border>
			</VerticalStackLayout>
		</ScrollView>

		<!-- Footer with Actions -->
		<Grid Grid.Row="2" Padding="20,15,20,30" ColumnDefinitions="*,*" RowDefinitions="Auto,Auto">
			<!-- Main Action Button with Gradient -->
			<Button Grid.ColumnSpan="2" Grid.Row="0"
                    x:Name="MarkAttendanceButton" 
                    Text="Mark My Attendance" 
                    Style="{StaticResource PrimaryButtonStyle}"
                    Clicked="MarkAttendanceButton_Clicked">
				<Button.Background>
					<LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
						<GradientStop Color="#4CAF50" Offset="0.1"/>
						<GradientStop Color="#2196F3" Offset="0.9"/>
					</LinearGradientBrush>
				</Button.Background>
			</Button>

			<!-- Secondary Actions -->
			<Button Grid.Column="0" Grid.Row="1"
                    x:Name="RefreshButton" 
                    Text="Refresh Info" 
                    TextColor="#2196F3"
                    BorderColor="#2196F3"
                    Style="{StaticResource SecondaryButtonStyle}"
                    Clicked="RefreshButton_Clicked"
                    Margin="0,5,5,0"/>

			<Button Grid.Column="1" Grid.Row="1" 
                    x:Name="ViewHistoryButton"
                    Text="View History" 
                    TextColor="#4CAF50"
                    BorderColor="#4CAF50"
                    Style="{StaticResource SecondaryButtonStyle}"
                    Clicked="ViewHistoryButton_Clicked"
                    Margin="5,5,0,0"/>
		</Grid>
	</Grid>
</ContentPage>
